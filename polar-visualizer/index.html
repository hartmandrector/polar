<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Polar Visualizer</title>
  <link rel="stylesheet" href="/src/style.css" />
</head>
<body>
  <div id="app">
    <div id="sidebar">
      <h2>Polar Visualizer</h2>

      <div class="control-group">
        <label>Polar</label>
        <select id="polar-select">
          <option value="aurafive">Aura 5 (Wingsuit)</option>
          <option value="a5segments">A5 Segments (Wingsuit 6-seg)</option>
          <option value="ibexul">Ibex UL (Canopy)</option>
          <option value="slicksin">Slick Sin (Skydiver)</option>
          <option value="caravan">Caravan (Airplane)</option>
        </select>
      </div>

      <div class="control-group" id="canopy-pilot-group" style="display:none;">
        <label>Canopy Pilot</label>
        <select id="canopy-pilot-select">
          <option value="wingsuit">Wingsuit Pilot</option>
          <option value="slick">Slick Pilot</option>
        </select>
      </div>

      <div id="canopy-controls-group" class="attitude-group" style="display:none;">
        <div class="control-group-header">Canopy Controls</div>
        <div class="control-group canopy-mode-toggle">
          <label><input type="radio" name="canopy-mode" value="brakes" checked /> Brakes</label>
          <label><input type="radio" name="canopy-mode" value="fronts" /> Fronts</label>
          <label><input type="radio" name="canopy-mode" value="rears" /> Rears</label>
        </div>
        <div class="control-group">
          <label><span id="left-hand-label">Left Brake: </span><span id="left-hand-value">0%</span></label>
          <input type="range" id="left-hand-slider" min="0" max="100" value="0" step="1" />
        </div>
        <div class="control-group">
          <label><span id="right-hand-label">Right Brake: </span><span id="right-hand-value">0%</span></label>
          <input type="range" id="right-hand-slider" min="0" max="100" value="0" step="1" />
        </div>
        <div class="control-group">
          <label>Weight Shift: <span id="weight-shift-value">0</span></label>
          <input type="range" id="weight-shift-slider" min="-100" max="100" value="0" step="1" />
        </div>
        <div class="control-group" id="pilot-pitch-group">
          <label>Pilot Pitch: <span id="pilot-pitch-value">0°</span></label>
          <input type="range" id="pilot-pitch-slider" min="-180" max="180" value="0" step="1" />
        </div>
        <div class="control-group" id="deploy-group">
          <label>Deploy: <span id="deploy-value">100%</span></label>
          <input type="range" id="deploy-slider" min="0" max="100" value="100" step="1" />
        </div>
      </div>

      <div class="control-group">
        <label>α (AOA): <span id="alpha-value">12.0°</span></label>
        <input type="range" id="alpha-slider" min="-180" max="180" value="12" step="0.5" />
      </div>

      <div class="control-group">
        <label>β (Sideslip): <span id="beta-value">0.0°</span></label>
        <input type="range" id="beta-slider" min="-90" max="90" value="0" step="0.5" />
      </div>

      <div class="control-group" id="delta-group">
        <label><span id="delta-label">δ (Control)</span>: <span id="delta-value">0.00</span></label>
        <input type="range" id="delta-slider" min="-100" max="100" value="0" step="1" />
      </div>

      <div class="control-group">
        <label>Airspeed: <span id="airspeed-value">45.0 m/s</span></label>
        <input type="range" id="airspeed-slider" min="0" max="80" value="45" step="0.5" />
      </div>

      <div class="control-group">
        <label>ρ (Density): <span id="rho-value">1.095 kg/m³</span></label>
        <input type="range" id="rho-slider" min="400" max="1225" value="1095" step="5" />
      </div>

      <div id="wingsuit-controls-group" class="attitude-group" style="display:none;">
        <div class="control-group-header">Wingsuit Controls</div>
        <div class="control-group">
          <label>Pitch Throttle: <span id="ws-pitch-value">0</span></label>
          <input type="range" id="ws-pitch-slider" min="-100" max="100" value="0" step="1" />
        </div>
        <div class="control-group">
          <label>Yaw Throttle: <span id="ws-yaw-value">0</span></label>
          <input type="range" id="ws-yaw-slider" min="-100" max="100" value="0" step="1" />
        </div>
        <div class="control-group">
          <label>Roll Throttle: <span id="ws-roll-value">0</span></label>
          <input type="range" id="ws-roll-slider" min="-100" max="100" value="0" step="1" />
        </div>
        <div class="control-group" id="dirty-group">
          <label>Dirty: <span id="dirty-value">0.00</span></label>
          <input type="range" id="dirty-slider" min="0" max="100" value="0" step="1" />
        </div>
        <div class="control-group">
          <label>Dihedral: <span id="ws-dihedral-value">50%</span></label>
          <input type="range" id="ws-dihedral-slider" min="0" max="100" value="50" step="1" />
        </div>
        <div class="control-group">
          <label>Deploy: <span id="ws-deploy-value">0%</span></label>
          <input type="range" id="ws-deploy-slider" min="0" max="100" value="0" step="1" />
        </div>
      </div>

      <div class="control-group">
        <label>View Frame</label>
        <select id="frame-select">
          <option value="body">Body Frame</option>
          <option value="inertial">Inertial Frame</option>
        </select>
      </div>

      <div id="attitude-group" class="attitude-group" style="display:none;">
        <div id="attitude-header" class="control-group-header">Attitude (Euler 3-2-1)</div>
        <div class="control-group attitude-mode-toggle">
          <label><input type="checkbox" id="attitude-mode" /> Specify wind direction</label>
        </div>
        <div class="control-group">
          <label><span id="roll-label">φ (Roll): </span><span id="roll-value">0.0°</span></label>
          <input type="range" id="roll-slider" min="-180" max="180" value="0" step="0.5" />
        </div>
        <div class="control-group">
          <label><span id="pitch-label">θ (Pitch): </span><span id="pitch-value">0.0°</span></label>
          <input type="range" id="pitch-slider" min="-89" max="89" value="0" step="0.5" />
        </div>
        <div class="control-group">
          <label><span id="yaw-label">ψ (Yaw): </span><span id="yaw-value">0.0°</span></label>
          <input type="range" id="yaw-slider" min="-180" max="180" value="0" step="0.5" />
        </div>
        <div id="euler-rate-group" class="euler-rate-subgroup">
          <div class="control-group-header">Euler Rates (∂/∂t)</div>
          <div class="control-group">
            <label>φ̇ (Roll Rate): <span id="phi-dot-value">0°/s</span></label>
            <input type="range" id="phi-dot-slider" min="-180" max="180" value="0" step="1" />
          </div>
          <div class="control-group">
            <label>θ̇ (Pitch Rate): <span id="theta-dot-value">0°/s</span></label>
            <input type="range" id="theta-dot-slider" min="-180" max="180" value="0" step="1" />
          </div>
          <div class="control-group">
            <label>ψ̇ (Yaw Rate): <span id="psi-dot-value">0°/s</span></label>
            <input type="range" id="psi-dot-slider" min="-180" max="180" value="0" step="1" />
          </div>
        </div>
      </div>

      <div class="control-group">
        <label><input type="checkbox" id="show-legacy" /> Show Legacy Polar</label>
      </div>

      <div class="control-group">
        <label><input type="checkbox" id="show-mass-overlay" /> Show Mass Points</label>
      </div>

      <div class="control-group">
        <label><input type="checkbox" id="show-accel-arcs" /> Angular Accel Arcs</label>
      </div>

      <div id="readout">
        <h3>Coefficients</h3>
        <div class="readout-grid">
          <div class="readout-row"><span class="readout-label">CL</span><span id="r-cl" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CD</span><span id="r-cd" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CY</span><span id="r-cy" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CM</span><span id="r-cm" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">Cn</span><span id="r-cn" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">Cl<sub>roll</sub></span><span id="r-cl-roll" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CP</span><span id="r-cp" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">f(α)</span><span id="r-f" class="readout-val">—</span></div>
        </div>
        <h3>Forces</h3>
        <div class="readout-grid">
          <div class="readout-row"><span class="readout-label">Lift</span><span id="r-lift" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">Drag</span><span id="r-drag" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">Side</span><span id="r-side" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">Weight</span><span id="r-weight" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">L/D</span><span id="r-ld" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">Glide°</span><span id="r-glide" class="readout-val">—</span></div>
        </div>
        <h3>Inertia</h3>
        <div class="readout-grid">
          <div class="readout-row"><span class="readout-label">I<sub>xx</sub></span><span id="r-ixx" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">I<sub>yy</sub></span><span id="r-iyy" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">I<sub>zz</sub></span><span id="r-izz" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">α̈<sub>pitch</sub></span><span id="r-pitch-accel" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">α̈<sub>yaw</sub></span><span id="r-yaw-accel" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">α̈<sub>roll</sub></span><span id="r-roll-accel" class="readout-val">—</span></div>
        </div>
        <h3>Rates</h3>
        <div class="readout-grid">
          <div class="readout-row"><span class="readout-label">φ̇, θ̇, ψ̇</span><span id="r-euler-rates" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">p, q, r</span><span id="r-body-rates" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">ṗ, ṅ, ṙ</span><span id="r-body-accel" class="readout-val">—</span></div>
        </div>
        <h3>Positions</h3>
        <div class="readout-grid">
          <div class="readout-row"><span class="readout-label">CG (body)</span><span id="r-cg-body" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CG (inertial)</span><span id="r-cg-inertial" class="readout-val">—</span></div>
        </div>
        <h3>Legacy (table)</h3>
        <div class="readout-grid">
          <div class="readout-row"><span class="readout-label">CL<sub>leg</sub></span><span id="r-cl-leg" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CD<sub>leg</sub></span><span id="r-cd-leg" class="readout-val">—</span></div>
          <div class="readout-row"><span class="readout-label">CP<sub>leg</sub></span><span id="r-cp-leg" class="readout-val">—</span></div>
        </div>
      </div>

      <div id="legend">
        <h3>Vector Legend</h3>
        <div class="legend-item"><span class="legend-color" style="background:#888;"></span> Relative Wind</div>
        <div class="legend-item"><span class="legend-color" style="background:#00ff00;"></span> Lift</div>
        <div class="legend-item"><span class="legend-color" style="background:#ff0000;"></span> Drag</div>
        <div class="legend-item"><span class="legend-color" style="background:#4488ff;"></span> Side Force</div>
        <div class="legend-item"><span class="legend-color" style="background:#ffff00;"></span> Total Aero</div>
        <div class="legend-item"><span class="legend-color" style="background:#aaaaaa;"></span> Weight</div>
        <div class="legend-item"><span class="legend-color" style="background:#ff00ff;"></span> Net Force</div>
        <div class="legend-item"><span class="legend-color" style="background:#ff8844;"></span> Pitch Moment</div>
        <div class="legend-item"><span class="legend-color" style="background:#44ff88;"></span> Yaw Moment</div>
        <div class="legend-item"><span class="legend-color" style="background:#8844ff;"></span> Roll Moment</div>
        <div class="legend-item"><span class="legend-color" style="background:#ffbb88;"></span> Pitch Rate</div>
        <div class="legend-item"><span class="legend-color" style="background:#88ffbb;"></span> Yaw Rate</div>
        <div class="legend-item"><span class="legend-color" style="background:#bb88ff;"></span> Roll Rate</div>
        <div class="legend-item"><span class="legend-color" style="background:#00cccc;"></span> Local Velocity</div>
      </div>

      <div id="debug-toggle" class="debug-toggle-btn">▶ Debug Overrides</div>
      <div id="debug-panel"></div>
    </div>

    <div id="main-area">
      <div id="viewport">
        <canvas id="three-canvas"></canvas>
      </div>

      <div id="chart-column">
        <div class="chart-panel">
          <div class="chart-header">
            <select id="chart1-select">
              <option value="cl">Lift (CL vs α)</option>
              <option value="cd">Drag (CD vs α)</option>
              <option value="cp">Center of Pressure (CP vs α)</option>
              <option value="ld">Glide Ratio (L/D vs α)</option>
            </select>
            <label class="legacy-toggle"><input type="checkbox" id="chart1-legacy" checked /> Legacy</label>
          </div>
          <div class="chart-container">
            <canvas id="chart1-canvas"></canvas>
          </div>
        </div>

        <div class="chart-panel">
          <div class="chart-header">
            <select id="chart2-select">
              <option value="polar">Polar Curve (CL vs CD)</option>
              <option value="speed">Speed Polar (Vxs vs Vys)</option>
            </select>
            <label class="legacy-toggle"><input type="checkbox" id="chart2-legacy" checked /> Legacy</label>
            <label class="legacy-toggle"><input type="checkbox" id="chart2-mph" /> mph</label>
          </div>
          <div class="chart-container">
            <canvas id="chart2-canvas"></canvas>
          </div>
        </div>

        <div id="aoa-legend"></div>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
